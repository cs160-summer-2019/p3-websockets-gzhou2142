{% load static %}

<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>P4 Drawing</title>

    <link rel="stylesheet" type="text/css" href="{% static 'draw/vendor/bootstrap/css/bootstrap.min.css' %}">
    <script type="text/javascript" src="{% static 'draw/vendor/jquery/jquery-3.3.1.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'draw/vendor/paper/paper-full.min.js' %}"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>


<style type="text/css">
  .background {
    font-family: sans-serif;
    width: 100vw;
    height: 90vh;
    background-color: #DDDDDD;
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    align-content: flex-start;
    justify-content:center;
    padding-top: 2vh;
    overflow: scroll;
    padding-top: 0;
  }
   .menu-buttons {
    background-color: #344955;
    width: 100%;
    height: 10vh;
    display: flex;
    flex-wrap: wrap;
    padding-top: 30px;
    justify-content:space-evenly;
    position: absolute;
    bottom: 0;
  }
  #popup {
    position: absolute;
    display: flex;
    justify-content: center;
    height: 90vh;
    width: 100vw;
    background-color: lightblue;
    display:none;
  }
  .plans {
    background-color : white;
    width : 90vw;
    height: 20vh;
    border-radius: 50px;
    margin-top: 2.5vh;
    box-shadow: 0px 8px 8px rgba(0, 0, 0, 0.3);
    
    
  }
  .top {
    position: relative;
    width: 50%;
    height: 75%;
    border-top-left-radius: 50px;
    border-top-right-radius: 50px;
    background-color: white;
    float: left;
  }
  .bottom {
    font-size: 60px;
    font-family: Arial, Times, serif;
    font-weight: bold;
    padding-left: 30px;
    padding-top: 10px;
  }
  .info {
    position: relative;
    width: 50%;
    height: 75%;
    float: left;
    border-bottom: solid;
  }
  
  .post {
    background-color: #344955;
    position: absolute;
    bottom: 30px;
    width: 80vw;
    height: 150px;
    
  }
 
  .top>img {
    position:relative;
    background-color : #4a6572;
    border-top-left-radius: 50px;
    width: 100%;
    object-fit:cover;
    object-position: 50% 20%;
    height:100%;
  }
  
  .button {
    height: 150px;
    width: 250px;
    border-radius: 35px;
    background-color: #F9AA33;
  }
  form {
    position: absolute;
    top: 150px;
    left: 10%;
  }
  input[type=text] {
    display: flex;
    flex-direction: row;
    justify-content: space-evenly;
    font-size: 40px;
    width: 80vw;
    padding: 18px 25px;
    margin: 8px 0;
    box-sizing: border-box;
    border: 3px solid #ccc;
    -webkit-transition: 0.2s;
    transition: 0.2s;
    outline: none;
    border-radius: 15px;
    
  }
  select {
    width: 80vw;
    padding: 18px 25px;
    margin: 8px 0;
    box-sizing: border-box;
    border: 3px solid #ccc;
     -webkit-transition: 0.2s;
    transition: 0.2s;
    border-radius: 15px;
    font-size: 50px;
    
  }

  label {
    width: 100%;
    font-size: 50px;
  }

  input[type=text]:focus {
    border: 3px solid #555;
  }
  #save {
    display: none;
    background-color: #3EE13E;
  }
  #discard {
    display: none;
    background-color: #E13E3E;
  }

  
  
</style>

</head>
<body>
  <div class = "background">
    <div class = "plans">
      <div class = "top">
         <img src= "https://www.signify.com/b-dam/signify/en-aa/about/news/2019/20190321-signify-illuminates-shanghai-bund-with-tunable-white-led-to-show-historic-buildings-in-the-best-light/Shanghai_Bund_tunable_white_1Mb_photo-landscape.jpg" alt = "The Bund">
        </div>
      <div class = "info"> </div>
      <div class = "bottom">
        Shanghai Experience
      </div>
    </div>
    <div class = "plans">
      <div class = "top">
         <img src= "https://media.cntraveler.com/photos/5a8f3b070e2cf839e9dbfa1d/master/w_1200,c_limit/NYC_GettyImages-640006562.jpg" alt = "The Bund">
        </div>
      <div class = "info"> </div>

      <div class = "bottom">
        New York Adventures
      </div>
    </div>
    
    <div class = "plans">
      <div class = "top">
         <img src= "https://img.travel.rakuten.co.jp/mytrip/content/trend/hanami-tokyo/images/key.jpg" alt = "The Bund">
        </div>
      <div class = "info"> </div>

      <div class = "bottom">
        Tokyo Blossoms
      </div>
    </div>

  <div class = "menu-buttons">
<!--     <div class = "post">Post </div> -->
    <div class = "button" id = "discard"></div>
    <div class = "button" id = "post"></div>
    <div class = "button" id = "save">
    </div>
  </div>
<div id="popup">
  <form id = "user-form">
    <label for="name">Name</label>
    <input type="text" id="name" name="name" value="">
    <label for="event">Event</label>
    <input type="text" id="event" name="event" value="">
    <label for="stime">Start Time</label>
    <input type="text" id="stime" name="stime" value="">
    <label for="etime">End Time</label>
    <input type="text" id="etime" name="etime" value="">
    <label for="city">City</label>
      <select id="city" name="city">
        <option value="Berkeley">Berkeley</option>
        <option value="San Francisco">San Francisco</option>
        <option value="Oakland">Oakland</option>
      </select>
  </form>
</div>
</body>
<script type="text/javascript">
  window.onload = function (){
    var clicked = false;
    $("#post").click(function() {
      $("#popup").fadeToggle();
      $("#post").fadeTo("fast", 0);
      $("#save").fadeTo("fast", 1);
      $("#discard").fadeTo("fast", 1);
     });
    
    $("#save").click(function() {
      var name = document.getElementById("name").value;
      var event = document.getElementById("event").value;
      var stime = document.getElementById("stime").value;
      var etime = document.getElementById("etime").value;
      var city = document.getElementById("city").value;
      const packet = {
        _name : name,
        _event : event,
        _stime : stime,
        _etime : etime,
        _city : city
      }
      socket.send(JSON.stringify(packet));

      console.log(city);
      $("#popup").fadeToggle();
      $("#popup").css("display","none");
      $("#post").fadeTo("fast", 1);
      $("#save").fadeTo("fast", 0);
      $("#discard").fadeTo("fast", 0);
    });
    $("#discard").click(function() {
      $("#popup").fadeToggle();
      $("#popup").css("display","none");
      $("#post").fadeTo("fast", 1);
      $("#save").fadeTo("fast", 0);
      $("#discard").fadeTo("fast", 0);
    });
    
    $(".plans").click(function() {
    });
    
   
    
    var url = window.location.href;
    var socket = new WebSocket(
         'wss://p3-websockets-gzhou2142-garyzhou347810.codeanyapp.com/ws/draw');
    
    socket.onmessage = function (receivedData) {
      var data = JSON.parse(receivedData.data);
      console.log("socket message received");
      console.log(data);
    }
    
    socket.onclose = function(e) {
      console.log('Socket Closed Unexpectedly');
    }
  }
  
  
</script>
</html>
