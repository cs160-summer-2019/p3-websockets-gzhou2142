{% load static %}
<!DOCTYPE html>
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <title>P4 Drawing</title>
      <link rel="stylesheet" type="text/css" href="{% static 'draw/vendor/bootstrap/css/bootstrap.min.css' %}">
      <script type="text/javascript" src="{% static 'draw/vendor/jquery/jquery-3.3.1.min.js' %}"></script>
      <script type="text/javascript" src="{% static 'draw/vendor/paper/paper-full.min.js' %}"></script>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
      <style type="text/css">
         .background {
           font-family: sans-serif;
           width: 100vw;
           height: 90vh;
           background-color: #DDDDDD;
           display: flex;
           flex-direction: row;
           flex-wrap: wrap;
           align-content: flex-start;
           justify-content: center;
           padding-top: 2vh;
           overflow: scroll;
           padding-top: 0;
         }

         .menu-buttons {
           background-color: #344955;
           width: 100%;
           height: 10vh;
           display: flex;
           flex-wrap: wrap;
           padding-top: 30px;
           justify-content: space-evenly;
           position: absolute;
           bottom: 0;
         }

         #popup {
           position: absolute;
           top: 0;
           display: flex;
           justify-content: center;
           height: 90vh;
           width: 100vw;
           background-color: lightblue;
           display: none;
         }

         .plans {
           background-color: white;
           width: 90vw;
           height: 20vh;
           border-radius: 50px;
           margin-top: 2.5vh;
           box-shadow: 0px 8px 8px rgba(0, 0, 0, 0.3);
         }

         .top {
           position: relative;
           width: 50%;
           height: 75%;
           border-top-left-radius: 50px;
           border-top-right-radius: 50px;
           background-color: white;
           float: left;
           border-bottom: solid;
         }

         .bottom {
           font-size: 60px;
           font-family: Arial, Times, serif;
           font-weight: bold;
           height: 25%;
           position: relative;
           bottom: 0px;
           padding-left: 40px;
           padding-top: 15.4vh;
         }

         .info {
           position: relative;
           width: 50%;
           height: 75%;
           float: left;
           border-bottom: solid;
           font-size: 45px;
           display: flex;
           flex-direction: column;
           justify-content: space-evenly;
           padding-left: 50px;
           border-left: solid;
         }

         .host {
           font-size: 25px;
         }

         .post {
           background-color: #344955;
           position: absolute;
           bottom: 30px;
           width: 80vw;
           height: 150px;
         }

         .top>img {
           position: relative;
           background-color: #4a6572;
           border-top-left-radius: 50px;
           width: 100%;
           object-fit: cover;
           object-position: 50% 20%;
           height: 100%;
         }

         .button {
           height: 150px;
           width: 250px;
           border-radius: 35px;
           background-color: #F9AA33;
         }

         form {
           position: absolute;
           top: 150px;
           left: 10%;
         }

         input[type=text] {
           display: flex;
           flex-direction: row;
           justify-content: space-evenly;
           font-size: 40px;
           width: 80vw;
           padding: 18px 25px;
           margin: 8px 0;
           box-sizing: border-box;
           border: 3px solid #ccc;
           -webkit-transition: 0.2s;
           transition: 0.2s;
           outline: none;
           border-radius: 15px;
         }

         select {
           width: 80vw;
           padding: 18px 25px;
           margin: 8px 0;
           box-sizing: border-box;
           border: 3px solid #ccc;
           -webkit-transition: 0.2s;
           transition: 0.2s;
           border-radius: 15px;
           font-size: 50px;
         }

         label {
           width: 100%;
           font-size: 50px;
         }

         input[type=text]:focus {
           border: 3px solid #555;
         }

         #save {
           padding-top: 10px;
           display: none;
           background-color: #3EE13E;
         }

         #discard {
           padding-top: 20px;
           display: none;
           background-color: #E13E3E;
         }

         #clear {
           padding-top: 20px;
           display: none;
           background-color: yellow;
         }
        
          #post {
            padding-top: 15px;
          }

         #checkicon {
           width: 140px;
           height: 140px;
           display: block;
           margin: auto;
         }

         #refreshicon {
           width: 120px;
           height: 120px;
           display: block;
           margin: auto;
         }

         #discardicon {
           width: 110px;
           height: 110px;
           display: block;
           margin: auto;
         }
        
        #posticon {
          width: 120px;
          height: 120px;
          display:block;
          margin: auto;
        }
        .testdiv {
          width: 90vw;
          height: 90vh;
          background-color: white;
          position: absolute;
          top: 100px;
          left: 50px;
          display:none;
          box-shadow: 5px 5px 15px grey;
          border-radius: 50px;
          border-color: grey;
          border-width: 2px;
        }
          
        #closebutton {
            width: 100px;
            top: 30px;
            right: 30px;
            position: absolute;
        }
        
        #avatar {
            width: 200px;
            left: 30px;
            position: relative;
            padding-top: 30px;
        }
          
        .evnt {
            left: 50px;
            width: 750px;
            position: relative;
            font-size: 60px;
            font-family: Impact, Charcoal, sans-serif;
            display: flex;
            padding-top: 100px;
        }
        
        .hst {
            left: 50px;
            position: relative;
            font-size: 40px;
            color: dimgrey;
            font-family: "Lucida Sans Unicode", "Lucida Grande", sans-serif;
            display: flex;
        }
        
        #pic {
           position: relative;
           border-radius: 50px;
           width: 782px;
           left: 50px;
        }
        
        .ctynm {
            left: 50px;
            font-family: "Lucida Sans Unicode", "Lucida Grande", sans-serif;
            font-size: 50px;
            display: flex;
            flex-direction: column;
            justify-content: space-evenly;
            position: relative;
            padding-top: 30px;
        }
        
        .tm {
            left: 50px;
            font-family: "Lucida Sans Unicode", "Lucida Grande", sans-serif;
            font-size: 50px;
            display: flex;
            flex-direction: column;
            justify-content: space-evenly;
            position: relative;
            padding-top: 30px;
        }
        
        .details {
            display: flex;
            flex-direction: column;
            justify-content: space-evenly;
        }
          
        #msg {
            width: 782px;
            height: 100px;
            font-family: "Lucida Sans Unicode", "Lucida Grande", sans-serif;
            font-size: 50px;
            border-radius: 25px;
        }
        
        #join {
            width: 782px;
            height: 100px;
            font-family: "Lucida Sans Unicode", "Lucida Grande", sans-serif;
            font-size: 50px;
            border-radius: 25px;
        }
          
        #dummy {
            font-family: "Lucida Sans Unicode", "Lucida Grande", sans-serif;
            font-size:40px;
        }
      </style>
   </head>
   <body>
      <div class = "background">
         <div class = "plans" id = "template">
            <div class = "top">
               <img id = "someimage" src= "https://bamlive.s3.amazonaws.com/BAMPFA-Addison-St_PhotoIwanBaan.jpg">
            </div>
            <div class = "info">
               <div class = "location">
                  Berkeley
               </div>
               <div class = "date">
                  2 pm - 5 pm
               </div>
               <div class = "group">
                  Group of 5
               </div>
               <div class = "host">
                  Host: Alfa
               </div>
            </div>
            <div class = "bottom">
               UC Berkeley Art Museum
            </div>
         </div>
         <div class = "plans">
            <div class = "top">
               <img src= "https://cdn.vox-cdn.com/thumbor/p4mSCoRVwYnjNhdnFFM829EVubg=/0x0:4250x2833/1200x800/filters:focal(1977x870:2657x1550)/cdn.vox-cdn.com/uploads/chorus_image/image/54936727/shutterstock_529749235.0.jpg">
            </div>
            <div class = "info">
               <div class = "location">
                  San Francisco
               </div>
               <div class = "date">
                  7 am - 10 am
               </div>
               <div class = "group">
                  Group of 10
               </div>
               <div class = "host">
                  Host: Bravo
               </div>
            </div>
            <div class = "bottom">
               Golden Gate Bridge
            </div>
         </div>
         <div class = "plans">
            <div class = "top">
               <img src= "https://dx6iy6yk2x0g.cloudfront.net/images/b6c/709/b6c709f11d4f45e701b2319d474d79970cb38c2a-640x360.jpg?compressionQuality=80&id=5175bec06747df5077000005&op=cropThumbnail&version=1">
            </div>
            <div class = "info">
               <div class = "location">
                  Berkeley
               </div>
               <div class = "date">
                  8 am - 11 am
               </div>
               <div class = "group">
                  Group of 15
               </div>
               <div class = "host">
                  Host: Charlie
               </div>
            </div>
            <div class = "bottom">
               Sather Gate
            </div>
         </div>
      </div>
      <div class = "menu-buttons">
         <!--     <div class = "post">Post </div> -->
         <div class = "button" id = "discard">
            <svg id = "discardicon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 298.667 298.667" style="enable-background:new 0 0 298.667 298.667;" xml:space="preserve">
               <g>
                  <g>
                     <polygon points="298.667,30.187 268.48,0 149.333,119.147 30.187,0 0,30.187 119.147,149.333 0,268.48 30.187,298.667     149.333,179.52 268.48,298.667 298.667,268.48 179.52,149.333   "/>
                  </g>
               </g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
            </svg>
         </div>
         <div class = "button" id = "post">
            <svg id = "posticon" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                 width="438.533px" height="438.533px" viewBox="0 0 438.533 438.533" style="enable-background:new 0 0 438.533 438.533;"
                 xml:space="preserve">
                 <g>
                    <path d="M409.133,109.203c-19.608-33.592-46.205-60.189-79.798-79.796C295.736,9.801,259.058,0,219.273,0
                       c-39.781,0-76.47,9.801-110.063,29.407c-33.595,19.604-60.192,46.201-79.8,79.796C9.801,142.8,0,179.489,0,219.267
                       c0,39.78,9.804,76.463,29.407,110.062c19.607,33.592,46.204,60.189,79.799,79.798c33.597,19.605,70.283,29.407,110.063,29.407
                       s76.47-9.802,110.065-29.407c33.593-19.602,60.189-46.206,79.795-79.798c19.603-33.596,29.403-70.284,29.403-110.062
                       C438.533,179.485,428.732,142.795,409.133,109.203z M347.179,237.539c0,4.948-1.811,9.236-5.428,12.847
                       c-3.62,3.614-7.901,5.428-12.847,5.428h-73.091v73.084c0,4.948-1.813,9.232-5.428,12.854c-3.613,3.613-7.897,5.421-12.847,5.421
                       h-36.543c-4.948,0-9.231-1.808-12.847-5.421c-3.617-3.621-5.426-7.905-5.426-12.854v-73.084h-73.089
                       c-4.948,0-9.229-1.813-12.847-5.428c-3.616-3.61-5.424-7.898-5.424-12.847v-36.547c0-4.948,1.809-9.231,5.424-12.847
                       c3.617-3.617,7.898-5.426,12.847-5.426h73.092v-73.089c0-4.949,1.809-9.229,5.426-12.847c3.616-3.616,7.898-5.424,12.847-5.424
                       h36.547c4.948,0,9.233,1.809,12.847,5.424c3.614,3.617,5.428,7.898,5.428,12.847v73.089h73.084c4.948,0,9.232,1.809,12.847,5.426
                       c3.617,3.615,5.428,7.898,5.428,12.847V237.539z"/>
                 </g>
                 <g></g>
                 <g></g>
                 <g></g>
                 <g></g>
                 <g></g>
                 <g></g>
                 <g></g>
                 <g></g>
                 <g></g>
                 <g></g>
                 <g></g>
                 <g></g>
                 <g></g>
                 <g></g>
                 <g></g>
              </svg>
        
        </div>
         <div class = "button" id = "save">
            <svg id = "checkicon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 375.147 375.147" style="enable-background:new 0 0 375.147 375.147;" xml:space="preserve">
               <g>
                  <g>
                     <polygon points="344.96,44.48 119.147,270.293 30.187,181.333 0,211.52 119.147,330.667 375.147,74.667   "/>
                  </g>
               </g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
            </svg>
         </div>
         <div class = "button" id = "clear">
            <svg id = "refreshicon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 341.333 341.333" style="enable-background:new 0 0 341.333 341.333;" xml:space="preserve">
               <g>
                  <g>
                     <path d="M341.227,149.333V0l-50.133,50.133C260.267,19.2,217.707,0,170.56,0C76.267,0,0.107,76.373,0.107,170.667    s76.16,170.667,170.453,170.667c79.467,0,146.027-54.4,164.907-128h-44.373c-17.6,49.707-64.747,85.333-120.533,85.333    c-70.72,0-128-57.28-128-128s57.28-128,128-128c35.307,0,66.987,14.72,90.133,37.867l-68.8,68.8H341.227z"/>
                  </g>
               </g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
               <g></g>
            </svg>
         </div>
      </div>
      <div id="popup">
         <form autocomplete="off" id = "user-form">
            <label for="name">Name</label>
            <input type="text" id="name" name="name" value="">
            <label for="event">Event</label>
            <input type="text" id="event" name="event" value="">
            <label for="stime">Start Time</label>
            <input type="text" id="stime" name="stime" value="">
            <label for="etime">End Time</label>
            <input type="text" id="etime" name="etime" value="">
            <label for="city">City</label>
            <select id="city" name="city">
               <option value="Berkeley">Berkeley</option>
               <option value="San Francisco">San Francisco</option>
               <option value="Oakland">Oakland</option>
            </select>
            <label for="size">Group Size</label>
            <input type="text" id="size" name="size" value="">
            <label for="webimage">Image URL</label>
            <input type="text" id="webimage" name="webimage" value="">
         </form>
       
      </div>
      <div class = "testdiv">
          <h1 class="evnt"></h1>
          <div id="closebutton">
            <?xml version="1.0" encoding="iso-8859-1"?>
            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
            viewBox="0 0 286.054 286.054" style="enable-background:new 0 0 286.054 286.054;" xml:space="preserve">
            <g>
            	<path style="fill:#E2574C;" d="M168.352,142.924l25.28-25.28c3.495-3.504,3.495-9.154,0-12.64l-12.64-12.649
              		c-3.495-3.486-9.145-3.495-12.64,0l-25.289,25.289l-25.271-25.271c-3.504-3.504-9.163-3.504-12.658-0.018l-12.64,12.649
            		c-3.495,3.486-3.486,9.154,0.018,12.649l25.271,25.271L92.556,168.15c-3.495,3.495-3.495,9.145,0,12.64l12.64,12.649
            		c3.495,3.486,9.145,3.495,12.64,0l25.226-25.226l25.405,25.414c3.504,3.504,9.163,3.504,12.658,0.009l12.64-12.64
            		c3.495-3.495,3.486-9.154-0.009-12.658L168.352,142.924z M143.027,0.004C64.031,0.004,0,64.036,0,143.022
                    c0,78.996,64.031,143.027,143.027,143.027s143.027-64.031,143.027-143.027C286.054,64.045,222.022,0.004,143.027,0.004z
                     M143.027,259.232c-64.183,0-116.209-52.026-116.209-116.209s52.026-116.21,116.209-116.21s116.209,52.026,116.209,116.209
                    S207.21,259.232,143.027,259.232z"/>
            </g>
            <g>
            </g>
            <g>
            </g>
            <g>
            </g>
            <g>
            </g>
            <g>
            </g>
            <g>
            </g>
            <g>
            </g>
            <g>
            </g>
            <g>
            </g>
            <g>
            </g>
            <g>
            </g>
            <g>
            </g>
            <g>
            </g>
            <g>
            </g>
            <g>
            </g>
            </svg>
          </div>
          <div class="details">
              <div id="avatar">
                <?xml version="1.0" encoding="iso-8859-1"?>
                <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                     viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">
                <g>
                    <path style="fill:#A4C2F7;" d="M443.733,434.835c0-25.925-14.647-49.626-37.835-61.221l-81.512-40.755
                        c-10.533-5.266-17.186-16.032-17.185-27.808v-31.985c2.738-3.171,5.311-6.48,7.71-9.915c10.998-15.63,19.541-32.849,25.335-51.06
                        c10.735-3.264,18.094-13.138,18.154-24.358V153.6c-0.028-7.231-3.131-14.11-8.533-18.917v-49.35c0,0,10.133-76.8-93.867-76.8
                        s-93.867,76.8-93.867,76.8v49.35c-5.402,4.807-8.505,11.685-8.533,18.917v34.133c0.027,8.699,4.471,16.789,11.799,21.477
                        c5.665,23.226,16.185,44.989,30.868,63.856v31.192c0,11.377-6.214,21.846-16.202,27.294l-76.128,41.525
                        c-21.989,11.994-35.67,35.04-35.67,60.087V460.8c0,23.565,84.051,42.667,187.733,42.667s187.733-19.102,187.733-42.667V434.835z"/>
                    <path style="fill:#E3E7F2;" d="M418.133,434.835c0-25.925-14.647-49.626-37.835-61.221l-81.512-40.755
                        c-10.533-5.266-17.186-16.032-17.185-27.808v-31.985c2.738-3.171,5.311-6.48,7.71-9.915c10.998-15.63,19.541-32.849,25.335-51.06
                        c10.735-3.264,18.094-13.138,18.154-24.358V153.6c-0.028-7.231-3.131-14.11-8.533-18.917v-49.35c0,0,10.133-76.8-93.867-76.8
                        c-57.6,0-68.267,76.8-68.267,76.8v49.35c-5.402,4.807-8.505,11.685-8.533,18.917v34.133c0.027,8.699,4.471,16.789,11.799,21.477
                        c5.665,23.226,16.185,44.989,30.868,63.856v31.192c0,11.377-6.214,21.846-16.202,27.294l-59.062,41.525
                        c-21.989,11.993-61.27,35.039-61.27,60.087V460.8c0,23.565,180.762,42.667,170.667,42.667c103.682,0,187.733-19.102,187.733-42.667
                        V434.835z"/>
                    <path style="fill:#428DFF;" d="M256,512c-67.883,0-196.267-10.7-196.267-51.2v-27.633c-0.01-28.173,15.379-54.099,40.117-67.583
                        l76.129-41.525c7.247-3.951,11.756-11.546,11.754-19.8v-28.233c-13.848-18.469-23.998-39.439-29.892-61.758
                        c-8.073-6.441-12.775-16.206-12.775-26.533V153.6c0.032-8.255,3.065-16.216,8.533-22.4V85.808
                        c-1.657-20.193,4.764-40.219,17.854-55.683C188.979,10.133,217.425,0,256,0s67.021,10.133,84.546,30.125
                        c13.09,15.464,19.511,35.49,17.854,55.683V131.2c5.468,6.184,8.501,14.145,8.533,22.4v34.133
                        c0.014,13.295-7.753,25.368-19.858,30.867c-6,17.611-14.487,34.274-25.204,49.483c-2.125,3.008-4.183,5.725-6.138,8.117v28.85
                        c-0.03,8.551,4.805,16.376,12.467,20.175l81.517,40.758c26.146,12.965,42.648,39.666,42.55,68.85V460.8
                        C452.266,501.3,323.883,512,256,512z M256,17.067c-33.446,0-57.571,8.175-71.713,24.308
                        c-10.023,11.923-14.943,27.316-13.696,42.842c0.05,0.37,0.075,0.743,0.075,1.117v49.35c0.001,2.414-1.021,4.716-2.813,6.333
                        c-3.622,3.181-5.705,7.763-5.721,12.583v34.133c0.019,5.804,2.996,11.198,7.896,14.308c1.867,1.206,3.19,3.092,3.688,5.258
                        c5.368,21.914,15.281,42.455,29.096,60.292c1.284,1.536,1.987,3.473,1.987,5.475v31.192c0.001,14.499-7.917,27.84-20.646,34.783
                        l-76.129,41.525c-19.256,10.492-31.235,30.671-31.225,52.6V460.8c0,11.583,63.25,34.133,179.2,34.133s179.2-22.55,179.2-34.133
                        v-25.967c0.08-22.714-12.764-43.497-33.117-53.583l-81.517-40.758c-13.457-6.676-21.949-20.42-21.9-35.441v-31.983
                        c-0.001-2.074,0.755-4.077,2.125-5.633c2.54-2.944,4.925-6.017,7.146-9.208c10.504-14.92,18.659-31.36,24.183-48.75
                        c0.854-2.649,2.948-4.715,5.608-5.533c7.178-2.134,12.109-8.72,12.137-16.208V153.6c-0.016-4.82-2.099-9.402-5.721-12.583
                        c-1.792-1.618-2.814-3.919-2.813-6.333v-49.35c0-0.373,0.025-0.747,0.075-1.117c1.166-15.595-3.802-31.029-13.846-43.017
                        C313.4,25.183,289.321,17.067,256,17.067z"/>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                </svg>
              </div>
              <div class="hst"></div>
              <div class="ctynm"></div>
              <div class="tm"></div>
              <div>
                  <p id="dummy" style="padding: 50px;">
                      Lorem ipsum dolor sit amet, consectetur adipiscing elit sed do.
                  </p>
              </div>
              <div class="imge">
                  <img id="pic" src="https://www.digitalcitizen.life/sites/default/files/styles/img_u_large/public/featured/2016-08/photo_gallery.jpg">
              </div>
          </div>
          <div style="padding: 100px 50px;">
              <div class="col-xs-6">
                  <button id="msg" type="button" class="btn btn-secondary">Leave message</button>
              </div>
              <div class="col-xs-6" style="padding-top: 30px;">
                  <button id="join" type="button" class="btn btn-info">Join!</button>
              </div>
          </div>
      </div>
   </body>
   <script type="text/javascript">
      window.onload = function (){
        var clicked = false;
        $("#post").click(function() {
          document.getElementById("user-form").reset();
          $("#popup").fadeToggle();
          $("#post").fadeTo("fast", 0);
          $("#post").css("display","none");
          $("#save").fadeTo("fast", 1);
          $("#discard").fadeTo("fast", 1);
          $("#clear").fadeTo("fast", 1);
         });
        
        $("#save").click(function() {
          var name = document.getElementById("name").value;
          var event = document.getElementById("event").value;
          var stime = document.getElementById("stime").value;
          var etime = document.getElementById("etime").value;
          var city = document.getElementById("city").value;
          var size = document.getElementById("size").value;
          var webimage = document.getElementById("webimage").value;
          const packet = {
            _name : name,
            _event : event,
            _stime : stime,
            _etime : etime,
            _city : city,
            _size : size,
            _webimage : webimage
          }
          socket.send(JSON.stringify(packet));
          $("#popup").fadeToggle();
          $("#popup").css("display","none");
          $("#post").fadeTo("fast", 1);
          $("#save").fadeTo("fast", 0);
          $("#discard").fadeTo("fast", 0);
          $("#clear").fadeTo("fast",0);
          $("#clear").css("display","none");
          $("#discard").css("display","none");
          $("#save").css("display","none");
        });
        $("#discard").click(function() {
          $("#popup").fadeToggle();
          $("#popup").css("display","none");
          $("#post").fadeTo("fast", 1);
          $("#save").fadeTo("fast", 0);
          $("#discard").fadeTo("fast", 0);
          $("#clear").fadeTo("fast",0);
          $("#clear").css("display","none");
          $("#discard").css("display","none");
          $("#save").css("display","none");
        });
        
        
        // Show detailed view when clicked
        $(".plans").click(function() {
          var imageLink = $(".plans").children(".top")[0].getElementsByTagName('img')[0].src;
          var cityName = $(".plans").children(".info").children(".location")[0].innerText;
          var time = $(".plans").children(".info").children(".date")[0].innerText;
          var host = $(".plans").children(".info").children(".host")[0].innerText;
          var event = $(".plans").children(".bottom")[0].innerText;
          $(".testdiv").fadeTo("fast", 1);
          $(".evnt")[0].innerText = event;
          $(".hst")[0].innerText = host;
          $(".imge").children("#pic").attr("src", imageLink);
          $(".ctynm")[0].innerText = cityName;
          $(".tm")[0].innerText = time;
        });
        
        //hide test div
        $("#closebutton").click(function() {
          $(".testdiv").fadeTo("fast",0);
          $(".testdiv").css("display","none");
        });
        
        
        $("#clear").click(function() {
          document.getElementById("user-form").reset();
        });
       
        
        var window_url = window.location.href;
        var socket = new WebSocket(
             'wss://p3-websockets-gzhou2142-garyzhou347810.codeanyapp.com/ws/draw');
        
        socket.onmessage = function (receivedData) {
          var data = JSON.parse(receivedData.data);
          var newRequest = $("#template").clone();
          var city = data._city;
          newRequest.children(".info").children(".location")[0].innerText = city;
          newRequest.children(".info").children(".date")[0].innerText = data._stime + " - " + data._etime;
          newRequest.children(".info").children(".group")[0].innerText = "Group of " + data._size;
          newRequest.children(".bottom")[0].innerText = data._event;
          var url1 = data._webimage;
          if (url1 == "") {
            url1 = "https://www.digitalcitizen.life/sites/default/files/styles/img_u_large/public/featured/2016-08/photo_gallery.jpg";
          }
          newRequest.children(".top").children("#someimage").attr("src", url1);
          newRequest.children(".info").children(".host")[0].innerText = "Host: " + data._name;
          console.log("socket message received");
          $(".background").prepend(newRequest);
        }
        
        socket.onclose = function(e) {
          console.log('Socket Closed Unexpectedly');
        }
      }
      
      
   </script>
</html>